(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{114:function(e,t,i){"use strict";i(91)},138:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return f}));var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"reviews-container"},[i("div",{staticClass:"page-content"},[i("div",{staticClass:"container"},[e._m(0),e.showReviewForm?i("review-form",{attrs:{title:e.titleReviewForm,review:e.currentReview},on:{save:e.saveClick,cancel:e.cancelClick}}):e._e(),i("ul",{staticClass:"reviews__list"},[i("div",{staticClass:"reviews__item reviews__new-item"},[i("btn",{attrs:{type:"square",title:"Добавить отзыв"},on:{click:e.addNew}})],1),e._l(e.reviews,(function(t){return i("li",{key:t.id,staticClass:"reviews__item reviews__loaded-item"},[i("review-card",{attrs:{review:t},on:{remove:function(i){return e.removeReview(i,t.id)},edit:function(i){return e.editReview(i,t.id)}}})],1)}))],2)],1)])])};r._withStripped=!0;var n=i(1),s=i.n(n),o=i(19),c=i.n(o),a=i(0),v=i.n(a),u=i(7);function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={components:{btn:function(){return i.e(0).then(i.bind(null,78))},reviewForm:function(){return i.e(7).then(i.bind(null,140))},reviewCard:function(){return i.e(8).then(i.bind(null,141))}},data:function(){return{showReviewForm:!1,titleReviewForm:"",isEdit:!1,currentReview:{author:"",occ:"",text:"",photo:{}}}},computed:l({},Object(u.c)("reviews",{reviews:function(e){return e.data},loading:function(e){return e.loading}})),methods:l(l({},Object(u.b)({fetchReviewsAction:"reviews/fetch",addReviewsAction:"reviews/add",removeReviewsAction:"reviews/remove",editReviewsAction:"reviews/edit",showTooltip:"tooltips/show"})),{},{addNew:function(){this.showReviewForm=!0,this.titleReviewForm="Новый отзыв",this.isEdit=!1,this.currentReview={author:"",occ:"",text:"",photo:{}}},saveNewReview:function(e){var t=this;return s()(v.a.mark((function i(){return v.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.addReviewsAction(e);case 3:t.showTooltip({text:"Новый отзыв добавлен",type:"success"}),i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),t.showTooltip({text:i.t0.message,type:"error"});case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()},saveEditReview:function(e){var t=this;return s()(v.a.mark((function i(){return v.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.editReviewsAction(e);case 3:t.showTooltip({text:"Отзыв отредактирован",type:"success"}),i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),t.showTooltip({text:i.t0.message,type:"error"});case 9:case"end":return i.stop()}}),i,null,[[0,6]])})))()},saveClick:function(e){this.showReviewForm=!1,this.isEdit?this.saveEditReview(e):this.saveNewReview(e)},cancelClick:function(){this.showReviewForm=!1,this.showTooltip({text:"Отзыв не сохранен",type:"warning"})},fetchReviews:function(){var e=this;return s()(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchReviewsAction();case 3:e.showTooltip({text:"Отзывы загружены",type:"success"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.showTooltip({text:t.t0.message,type:"error"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},removeReview:function(e,t){var i=this;return s()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.removeReviewsAction(t);case 3:i.showTooltip({text:"Отзыв удален",type:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i.showTooltip({text:e.t0.message,type:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},editReview:function(e,t){this.showReviewForm=!0,this.titleReviewForm="Редактирование отзыва",this.currentReview=l({},this.reviews.find((function(e){return e.id===t}))),this.isEdit=!0}}),created:function(){this.fetchReviews()}},h=(i(114),i(18)),d=Object(h.a)(p,r,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[this._v('Блок "Отзывы"')])])}],!1,null,"2c7c3bd3",null);d.options.__file="src/admin/pages/reviews/reviews.vue";var f=d.exports},91:function(e,t,i){}}]);