(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{112:function(t,e,r){"use strict";r(89)},137:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return f}));var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"works-container"},[r("div",{staticClass:"page-content"},[r("div",{staticClass:"container"},[t._m(0),t.showWorkForm?r("work-form",{attrs:{title:t.titleWorkForm,work:t.currentWork},on:{save:t.saveClick,cancel:t.cancelClick}}):t._e(),r("ul",{staticClass:"works__list"},[r("div",{staticClass:"works__item works__new-item"},[r("btn",{attrs:{type:"square",title:"Добавить работу"},on:{click:t.addNew}})],1),t._l(t.works,(function(e){return r("li",{key:e.id,staticClass:"works__item works__loaded-item"},[r("work-card",{attrs:{work:e},on:{remove:function(r){return t.removeWork(r,e.id)},edit:function(r){return t.editWork(r,e.id)}}})],1)}))],2)],1)])])};o._withStripped=!0;var n=r(1),s=r.n(n),i=r(19),c=r.n(i),a=r(0),u=r.n(a),l=r(7);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h={components:{btn:function(){return r.e(0).then(r.bind(null,77))},workCard:function(){return r.e(6).then(r.bind(null,133))},workForm:function(){return r.e(4).then(r.bind(null,134))}},data:function(){return{showWorkForm:!1,titleWorkForm:"",isEdit:!1,currentWork:{title:"",link:"",description:"",techs:"",photo:{}}}},computed:p({},Object(l.c)("works",{works:function(t){return t.data}})),methods:p(p({},Object(l.b)({fetchWorksAction:"works/fetch",addNewWork:"works/add",removeWorksAction:"works/remove",editWorksAction:"works/edit",showTooltip:"tooltips/show"})),{},{addNew:function(){this.showWorkForm=!0,this.titleWorkForm="Добавление работы",this.isEdit=!1,this.currentWork={title:"",link:"",description:"",techs:"",photo:{}}},saveNewWork:function(t){var e=this;return s()(u.a.mark((function r(){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.addNewWork(t);case 3:e.showTooltip({text:"Новая работа добавлена",type:"success"}),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),e.showTooltip({text:r.t0.message,type:"error"});case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},saveEditWork:function(t){var e=this;return s()(u.a.mark((function r(){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.editWorksAction(t);case 3:e.showTooltip({text:"Работа отредактирована",type:"success"}),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),e.showTooltip({text:r.t0.message,type:"error"});case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},saveClick:function(t){this.showWorkForm=!1,this.isEdit?this.saveEditWork(t):this.saveNewWork(t)},cancelClick:function(){this.showWorkForm=!1},fetchWorks:function(){var t=this;return s()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchWorksAction();case 3:t.showTooltip({text:"Работы загружены",type:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.showTooltip({text:e.t0.message,type:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},removeWork:function(t,e){var r=this;return s()(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.removeWorksAction(e);case 3:r.showTooltip({text:"Работа удалена",type:"success"}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),r.showTooltip({text:t.t0.message,type:"error"});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},editWork:function(t,e){this.showWorkForm=!0,this.titleWorkForm="Редактирование работы",this.currentWork=p({},this.works.find((function(t){return t.id===e}))),this.isEdit=!0}}),created:function(){this.fetchWorks()}},w=(r(112),r(18)),d=Object(w.a)(h,o,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[this._v('Блок "Работы"')])])}],!1,null,"4672a761",null);d.options.__file="src/admin/pages/works/works.vue";var f=d.exports},89:function(t,e,r){}}]);